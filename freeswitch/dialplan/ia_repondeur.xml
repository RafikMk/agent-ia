<?xml version="1.0" encoding="utf-8"?>
<!--
  Exemple de dialplan pour envoyer un appel vers l'agent IA (mod_audio_stream + Node.js).
  À placer dans conf/dialplan/default/ (ou équivalent) et inclure dans default.xml :
  <include>
    <X-PRE-PROCESS cmd="include" data="default/ia_repondeur.xml"/>
  </include>

  Utilisation : définir une destination (extension, DID 3CX, etc.) qui exécute ce contexte.
-->
<include>
  <context name="default">
    <!-- Exemple : extension 888 = agent IA -->
    <extension name="ia_repondeur_888">
      <condition field="destination_number" expression="^888$">
        <action application="answer"/>
        <action application="sleep" data="500"/>
        <!-- Remplacer par l'URL de votre serveur Node.js (ws://IP:PORT) -->
        <action application="audio_stream" data="ws://127.0.0.1:8080 bidirectional"/>
        <action application="hangup" data="NORMAL_CLEARING"/>
      </condition>
    </extension>
  </context>
</include>
